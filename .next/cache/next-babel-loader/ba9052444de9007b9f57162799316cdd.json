{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\nuri\\\\Desktop\\\\development\\\\pages\\\\new.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    border: 1px solid black;\\n    height: 30px;\\n    width: 70px;\\n    font-weight: bold;\\n    margin-top: 20px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useState, useContext } from 'react';\nimport { Box } from 'reflexbox';\nimport styled from '@emotion/styled';\nimport { Label, Input, Textarea } from '@rebass/forms';\nimport axios from 'axios';\nimport { UserContext } from '../context/UserContext';\n\nvar New = function New() {\n  _s();\n\n  var API_URL = process.env.API_URL;\n\n  var _useState = useState(''),\n      title = _useState[0],\n      setTitle = _useState[1];\n\n  var _useState2 = useState(''),\n      description = _useState2[0],\n      setDescription = _useState2[1];\n\n  var _useState3 = useState(''),\n      error = _useState3[0],\n      setError = _useState3[1];\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user; // console.log(user.data.user.username)\n\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n\n              if (user) {\n                _context.next = 4;\n                break;\n              }\n\n              setError('Please log in first');\n              return _context.abrupt(\"return\");\n\n            case 4:\n              if (title) {\n                _context.next = 7;\n                break;\n              }\n\n              setError('Please enter a title');\n              return _context.abrupt(\"return\");\n\n            case 7:\n              if (description) {\n                _context.next = 10;\n                break;\n              }\n\n              setError('Please enter the description');\n              return _context.abrupt(\"return\");\n\n            case 10:\n              axios.post(\"\".concat(API_URL, \"/posts\"), {\n                post_title: title,\n                description: description,\n                author: 'user'\n              }, {\n                headers: {\n                  'Authorization': \"Bearer \".concat(user.data.jwt)\n                }\n              }).then(function (response) {\n                console.log(response);\n              })[\"catch\"](function (error) {\n                console.log(error);\n              });\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Box, {\n    variant: \"formContainer\",\n    as: \"form\",\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, \"Create a Post\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }), __jsx(Label, {\n    htmlFor: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, \"Title\"), __jsx(Input, {\n    id: \"title\",\n    name: \"title\",\n    type: \"text\",\n    value: title,\n    onChange: function onChange(event) {\n      return setTitle(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }\n  }), __jsx(Label, {\n    htmlFor: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, \"Description\"), __jsx(Textarea, {\n    id: \"description\",\n    name: \"description\",\n    type: \"text\",\n    value: description,\n    onChange: function onChange(event) {\n      return setDescription(event.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }), error && __jsx(\"h2\", {\n    style: {\n      color: 'red'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 31\n    }\n  }, __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 59\n    }\n  }), error), __jsx(ButtonStyled, {\n    type: \"submit\",\n    variant: \"submitButton\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, \"Post\"));\n};\n\n_s(New, \"cKK8NIddFt3b3jz3KoEJDjNFLRo=\");\n\n_c = New;\nvar ButtonStyled = styled.button(_templateObject());\n_c2 = ButtonStyled;\nexport default New;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"New\");\n$RefreshReg$(_c2, \"ButtonStyled\");","map":{"version":3,"sources":["C:/Users/nuri/Desktop/development/pages/new.js"],"names":["useState","useContext","Box","styled","Label","Input","Textarea","axios","UserContext","New","API_URL","process","env","title","setTitle","description","setDescription","error","setError","user","handleSubmit","event","preventDefault","post","post_title","author","headers","data","jwt","then","response","console","log","target","value","color","ButtonStyled","button"],"mappings":"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","sourcesContent":["import { useState, useContext } from 'react'\r\nimport { Box } from 'reflexbox'\r\nimport styled from '@emotion/styled'\r\nimport { Label, Input, Textarea } from '@rebass/forms'\r\nimport axios from 'axios'\r\nimport { UserContext } from '../context/UserContext'\r\n\r\nconst New = () => {\r\n    const { API_URL } = process.env\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [error, setError] = useState('')\r\n    const { user } = useContext(UserContext)\r\n    // console.log(user.data.user.username)\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        if(!user){\r\n            setError('Please log in first')\r\n            return\r\n        }\r\n\r\n        if(!title){\r\n            setError('Please enter a title')\r\n            return\r\n        }\r\n\r\n        if(!description){\r\n            setError('Please enter the description')\r\n            return\r\n        }\r\n    \r\n        axios.post(`${API_URL}/posts`, {\r\n            post_title: title,\r\n            description: description,\r\n            author: 'user'\r\n          },\r\n          {\r\n            headers:{\r\n                'Authorization': `Bearer ${user.data.jwt}`\r\n            }\r\n          })\r\n          .then(function (response) {\r\n            console.log(response);\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error);\r\n          });\r\n    }\r\n\r\n    return(\r\n        <Box variant = \"formContainer\" as = \"form\" onSubmit = {handleSubmit}>\r\n            <h2>Create a Post</h2>\r\n            <br/>\r\n            <Label htmlFor='title'>Title</Label>\r\n                <Input\r\n                    id='title'\r\n                    name='title'\r\n                    type='text'\r\n                    value = {title}\r\n                    onChange = {(event) => setTitle(event.target.value)}\r\n                /><br />\r\n                <Label htmlFor='description'>Description</Label>\r\n                    <Textarea\r\n                        id='description'\r\n                        name='description'\r\n                        type='text'\r\n                        value = {description}\r\n                        onChange = {(event) => setDescription(event.target.value)}\r\n                    />\r\n                    {error && <h2 style = {{color:'red'}}><br/>{error}</h2>}\r\n                <ButtonStyled type = \"submit\" variant = \"submitButton\">Post</ButtonStyled>\r\n        </Box>\r\n    )\r\n}\r\n\r\n\r\nconst ButtonStyled = styled.button`\r\n    border: 1px solid black;\r\n    height: 30px;\r\n    width: 70px;\r\n    font-weight: bold;\r\n    margin-top: 20px;\r\n`\r\n\r\nexport default New"]},"metadata":{},"sourceType":"module"}