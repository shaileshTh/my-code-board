{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useContext, useEffect } from 'react';\nimport Router from 'next/router';\nimport { UserContext } from '../context/UserContext';\nimport { Box } from 'reflexbox';\nimport { Label, Input } from '@rebass/forms';\nimport styled from '@emotion/styled';\nimport axios from 'axios';\n\nconst LogIn = () => {\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: error,\n    1: setError\n  } = useState('');\n  const {\n    user,\n    setUser\n  } = useContext(UserContext); // console.log(user)\n\n  useEffect(() => {\n    if (user) {\n      Router.back();\n    }\n  }, [user]);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const {\n      API_URL\n    } = process.env;\n    axios.post(`${API_URL}/auth/local`, {\n      identifier: email,\n      password\n    }).then(response => {\n      setUser(response.data);\n    }).catch(error => {\n      // console.log(error)\n      setError(error.response.data.data[0].messages[0].message);\n    });\n  };\n\n  return __jsx(Box, {\n    variant: \"formContainer\",\n    as: \"form\",\n    onSubmit: handleSubmit\n  }, __jsx(\"h2\", null, \"Log In\"), __jsx(\"br\", null), __jsx(Label, {\n    htmlFor: \"email\"\n  }, \"Email\"), __jsx(Input, {\n    id: \"email\",\n    name: \"email\",\n    type: \"email\",\n    value: email,\n    onChange: event => {\n      setEmail(event.target.value);\n      setError('');\n    }\n  }), __jsx(\"br\", null), __jsx(Label, {\n    htmlFor: \"password\"\n  }, \"Password\"), __jsx(Input, {\n    id: \"password\",\n    name: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: event => {\n      setPassword(event.target.value);\n      setError('');\n    }\n  }), error && __jsx(\"h2\", {\n    style: {\n      color: 'red'\n    }\n  }, __jsx(\"br\", null), error), __jsx(ButtonStyled, {\n    type: \"submit\",\n    variant: \"submitButton\"\n  }, \"Login\"));\n};\n\nconst ButtonStyled = styled.button`\n    border: 1px solid black;\n    height: 30px;\n    width: 70px;\n    font-weight: bold;\n    margin-top: 20px;\n`;\nexport default LogIn;","map":null,"metadata":{},"sourceType":"module"}